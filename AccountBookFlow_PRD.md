# AccountBook PRD (Product Requirement Document)

## 1. 개요

**AccountBook**는 Gemini AI를 활용한 금융 및 일상 소비습관 관리 ios 앱으로, 사용자의 목표 달성을 AI 코칭으로 지원

## 핵심 가치 제안
- **문제** : 기존 가계부 앱은 단순히 입출력 기록에 그쳐, 쌓인 데이터가 한눈에 보이지 않고 인사이트를 제공하지 못합니다. 해외 직구, 해외 경비, 외화 수입 등 외화 거래를 수동으로 환산해야 해서 번거롭고, 환율 변동에 따른 실제 손익을 파악하기 어렵습니다. 복잡한 리포트나 그래프는 있지만 '지금 당장 무엇을 줄여야 하는지' 실행 가능한 조언이 없어 행동 변화로 이어지지 않습니다.
- **해결책**:
    - 한눈에 보는 대시보드: 월간 지출 요약, 카테고리별 비중, 예산 대비 진행률을 직관적인 비주얼로 표시해 3초 만에 재정 상황을 파악학 수 있습니다.
    - 실시간 환율 자동 적용: 외화 거래 입력 시 Gemini AI가 당일 환율을 자동으로 가져와 원화로 환산하고, 과거 거래도 현재 활율 기준으로 재평가해 환차익,손을 추적 합니다.
    - AI 기반 지출 분석: "이번 주 해외 직구가 평소보다 2배 늘었습니다" 같은 즉각적인 피드백과 함께,"달러 강세 기간이니 구매를 다음주로 미루세요" 같은 타이밍 조언을 제공합니다.
    - 대화형 AI 코칭:"여행경비를 줄이려면?" 처럼 자연어 질문에 개인 소비 패턴 기반 실행 가능한 조언을 줍니다.
- **차별점** :
    - 다중 통화 지원 + 환율 인텔리전스: 미국 달러, 유로, 엔화 등 주요 외와를 지원하고, 실시간 환율 API 연동으로 수동 계산 불필요, 환율 변동 알림으로 유리한 거래 타이밍을 알려줍니다.
    - 비주얼 우선 설계: 복잡한 표 대신 색상 코딩 카드, 프로그레스 바, 트렌드 그래프로 3초안에 핵심 정보 파악가능
    - Zero-effort 입력: 영수증 사진 촬영만으로 Gemini OCR이 통화, 금액, 카테고리를 자동 인식 & 환산하여 입력 시간 80% 단축.
    - AI 기반 맥락 이해: "금요일 저녁 외식"처럼 소비 패턴을 분석하고, "해외 직구가 환율 상승기에 집중됨" 같은 숨은 트렌드를 발견합니다.
    - iOS 네이티브 + 위젯: 홈 화면 위젯에 원화/외화 잔액, 목표 진행률, 오늘의 환율을 실시간 표시.
---

## 2. 타겟 사용자
### 주 사용자
- 해외 직구/여행 잦은 20~30대: 외화 거래가 많고, 환율 변동에 민감함
- 프리랜서/글로벌 수입자: 달러/유로 수입을 원화로 관리하고, 환차익 추적 필요
- 시각적 정보 선호자: 긴 리포트보다 그래픽 요약을 선호하고, 빠른 의사결정을 원함

### 핵심 KPI
- 30일 유지율 60% 이상 (직관적 대시보드로 매일 확인 동기 부여)
- 외화 거래 사용자 40% 이상 (해외 직구/여행족 타겟)
- 평균 입력 시간 1분 이내 (OCR + 환율 자동 적용)

---

## 3. 핵심 기능 (MVP)
### P0 - 필수 기능
| 기능          | 설명                               | Gemini AI 활용                           |
| ----------- | -------------------------------- | -------------------------------------- |
| 수입/지출 입력    | 거래 금액, 카테고리, 메모 입력               | AI 영수증 스캔 & 자동 분류 (OCR)                |
| 외화 환율 자동 적용 | 달러/유로/엔화 등 주요 통화 실시간 환율 연동       | 환율 변동 알림 & 유리한 거래 타이밍 조언               |
| 한눈에 보는 대시보드 | 원화/외화 잔액, 월간 지출 요약, 카테고리별 비중 시각화 | 지출 패턴 분석 & 즉각 피드백 ("이번 주 외식비 150% 초과") |
| 예산 설정 & 진행률 | 카테고리별 예산 설정, 실시간 진행률 표시          | 예산 초과 경고 & 절약 조언                       |
| 거래 내역 조회    | 날짜/카테고리별 필터링, 검색                 | -                                      |
### P1 - 주요 기능
| 기능       | 설명                            | Gemini AI 활용                       |
| -------- | ----------------------------- | ---------------------------------- |
| AI 코칭 챗봇 | 금융 질문 & 맞춤 조언 ("커피값 줄이려면?")   | 개인 소비 패턴 기반 실행 가능한 조언 생성           |
| 통계 리포트   | 주간/월간 지출 분석, 카테고리별 트렌드 그래프    | 숨은 소비 패턴 발견 ("금요일 저녁 외식 집중")       |
| 환율 변동 추적 | 과거 거래의 현재 환율 기준 재평가, 환차익/손 계산 | 환율 변동 시나리오 분석 ("달러 10% 상승 시 자산은?") |
| 목표 설정    | 저축/부채 상환 목표 등록, 진행 상황 트래킹     | 주간 체크인 & 동기부여 메시지                  |
| 홈 위젯     | 잔액, 오늘의 환율, 목표 진행률 실시간 표시     | 오늘의 AI 조언 한 줄 메시지                  |

###  P2 - 향후 기능
- 연동 계좌: 오픈뱅킹 API로 입출금 자동 불러오기 (원화/외화 계좌)
- 소셜 기능: 친구와 저축 목표 공유/경쟁, 절약 챌린지
- 리워드: 목표 달성 뱃지, 레벨 시스템
- 백업 & 동기화: iCloud 자동 백업
- 고급 분석: 환율 변동 시뮬레이션, 카드 혜택 추천
- 다크모드 & 테마: 색상 커스터마이징

### 기능별 우선순위 근거
- P0(필수): 앱 없이는 불가능한 핵심 가치 제공. 외화 자동 환산 + 대시보드가 차별점.​
- P1(주요): 사용자 리텐션 향상 & AI 차별점 강화. 30일 유지율 목표 달성에 필수.​
- P2(향후): 사용자 피드백 기반 점진 확장. 초기 MVP에서는 제외해 개발 속도 확보.

---

## 4. 기술 스택

### 개발 환경
- 플랫폼: iOS 17.0+ (SwiftUI)
- 언어: Swift 5.9+
- 아키텍처: MVVM + SwiftData​
- AI: Google Gemini API (Vision + Pro)
- 환율: Open Exchange Rates API / Fixer.io

### 핵심 프레임워크
- SwiftData: 로컬 데이터 저장 및 동기화 (거래 내역, 예산, 설정)​
- SwiftUI: 선언형 UI 구현
- Swift Charts: 지출 트렌드, 카테고리별 비중 시각화​
- WidgetKit: 홈 화면 위젯 (잔액, 환율, 목표 진행률)
- Vision Framework: 영수증 OCR 전처리 (Gemini와 조합)
- URLSession: 환율 API 및 Gemini API 통신

### 주요 라이브러리
- Alamofire (또는 URLSession 네이티브): 네트워크 레이어​
- Lottie-iOS: 로딩/성공 애니메이션
- KeychainAccess: API 키 및 민감 정보 안전 저장
- SwiftUIX (선택): 고급 SwiftUI 컴포넌트

### 데이터 아키텍처
- Model Layer: SwiftData @Model 클래스 (Transaction, Budget, Currency)​
- ViewModel Layer: @Observable 객체로 비즈니스 로직 처리​
- View Layer: SwiftUI 뷰 + @Query로 실시간 데이터 바인딩​
- Repository Pattern: 환율 API, Gemini API 호출을 캡슐화

### 백엔드 (선택적)
- Firebase: 사용자 인증, 클라우드 백업 (향후 확장 시)
- Cloud Functions: 환율 자동 업데이트 스케줄링

### 외부 API
| 서비스                 | 용도                 | 비용                  |
| ------------------- | ------------------ | ------------------- |
| Google Gemini API   | 영수증 OCR, 지출 분석, 챗봇 | 무료 티어 (~60 req/min) |
| Open Exchange Rates | 실시간 환율 데이터         | 무료 ~1,000 req/월     |
| Fixer.io (대체)       | 환율 백업 소스           | 무료 ~100 req/월       |

### 개발도구
- Xcode 15+: IDE
- Git/GitHub: 버전 관리
- TestFlight: 베타 배포
- Figma: UI/UX 디자인

### 아키텍처 선택 근거
- SwiftData over Core Data: iOS 17+ 타겟이므로 최신 선언형 API 활용. 보일러플레이트 코드 50% 감소.​
- MVVM over MVC: 뷰와 비즈니스 로직 분리로 테스트 용이성 향상. SwiftData @Query와 궁합이 좋음.​
- Repository Pattern: 환율 API와 Gemini API 호출을 추상화해, 나중에 다른 서비스로 교체 가능.

---
# 이부분 부터 수정 해야함(핵심은 기능 정리!!!!!!)

## 5. Gemini API 통합 전략

### 프롬프트 전략
- **시스템 프롬프트**: 긍정적, 격려하는 톤
- **컨텍스트**: 사용자 목표, 최근 달성률
- **응답 형식**: JSON 구조화 (파싱 용이)

---

## 6. UI/UX 원칙

### 디자인 시스템

- **색상**: 파스텔톤 기반 (부담없고 편안한)
- **타이포**: SF Pro (가독성 우선)
- **인터랙션**: 스와이프 제스처, 햅틱 피드백
- **접근성**: VoiceOver, Dynamic Type 완벽 지원

### 핵심 화면

1. **홈**: 오늘의 할일 + AI 메시지
2. **습관**: 목록 관리 + 체크
3. **통계**: 차트 + 인사이트
4. **프로필**: 설정 + 성과

---

## 7. 성공 지표 (KPI)

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| DAU (일일 활성 사용자) | 70% | 앱 오픈율 |
| 습관 완료율 | 60% | 체크 횟수/전체 |
| 7일 리텐션 | 40% | 재방문율 |
| AI 기능 사용률 | 80% | API 호출 수 |

---

## 8. 사용자 스토리

### 필수 기능 스토리

1. **습관 추가**
   - 사용자는 새로운 습관을 추가할 수 있다
   - 제목, 설명, 아이콘, 색상을 설정할 수 있다
   - 반복 주기를 선택할 수 있다 (매일/매주/커스텀)

2. **습관 완료**
   - 사용자는 오늘의 습관을 완료 표시할 수 있다
   - 완료 상태는 즉시 UI에 반영된다
   - 완료시 진행률이 자동 업데이트된다

3. **진행 상황 확인**
   - 사용자는 오늘의 전체 진행률을 볼 수 있다
   - 각 습관별 완료율을 확인할 수 있다
   - 연속 달성일(streak)을 확인할 수 있다

4. **AI 동기부여**
   - 사용자는 매일 AI 생성 격려 메시지를 받는다
   - 진행률에 따라 맞춤형 조언을 제공받는다
   - 습관 추천을 받을 수 있다

---

## 9. 비기능 요구사항

### 성능
- 앱 구동 시간: 3초 이내
- API 응답 시간: 2초 이내
- 오프라인 모드 지원

### 보안
- 사용자 데이터 로컬 저장
- API 키 안전한 관리
- 개인정보 익명화 처리

### 사용성
- 직관적인 UI/UX
- 최소한의 탭으로 주요 기능 접근
- 시각적 피드백 제공

### 호환성
- iOS 16.0 이상
- iPhone SE ~ iPhone 15 Pro Max
- 라이트/다크 모드 지원
- Dynamic Type 지원

---

## 10. 측정 가능한 목표

### 단기 목표 (1개월)
- [ ] 일일 활성 사용자 100명 달성
- [ ] 평균 세션 시간 3분 이상
- [ ] 습관 완료율 50% 이상

### 중기 목표 (3개월)
- [ ] 월간 활성 사용자 1,000명 달성
- [ ] 7일 리텐션 40% 달성
- [ ] AI 기능 사용률 70% 이상

### 장기 목표 (6개월)
- [ ] 앱스토어 평점 4.5 이상
- [ ] 유료 프리미엄 버전 출시
- [ ] 월간 활성 사용자 5,000명 달성

---

## 11. 부록

### 화면 플로우
```
앱 시작 → 홈 화면 → 습관 목록
         ↓         ↓
    습관 추가   통계 보기
         ↓         ↓
    습관 편집   AI 인사이트
```

---

**버전**: 1.0  
**작성일**: 2025년 11월  
**작성자**: 소프트웨어스튜디오2  
**대상**: iOS 개발 수업 프로젝트

---

#Rules
* 한글 주석: 학생용 교육 코드
* SSOT(Single Source Of Truth) : 데이터는 단일 저장소를 통해 접근
* KISS(Keep It Simple Stupid) : 불필요한 복잡성 회피
* DRY(Don't Repeat Yourself'): 전체 프로젝트에서 반복되는 동일 코드가 없도록 주의
*  **직접적인 파일 생성 금지**
* **반드시 파일 생성은 사용자에게 위임할 것**


